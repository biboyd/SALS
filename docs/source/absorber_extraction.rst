.. _absorber-extraction:

Absorber Extraction
====================

The main purpose of salsa is to extract absorbers from lightrays. Doing this
allows us to create synthetic absorption line catalogs/surveys in an analogous
fashion as real observational surveys. There are two methods which salsa can
extract absorbers: (1.) The ICE method which looks directly at cell level data of the
simulation.  (2.) Spectacle method which uses the
`spectacle python package <https://spectacle-py.readthedocs.io/>`_ to fit voigt
profiles to synthetic spectra that is generated by
`trident <https://trident.readthedocs.io/>`_.

.._ice-method:

ICE Method
-----------
the ICE (Iterative Cloud Extraction) method looks at a trident lightray and
attempts to extract "absorbers" by identifying continguous groups of cells along
the ray that will contribute to observable features in the absorption spectra.

The algorithm that does this is an iterative process (hence the I in ice).
The first step is to find the number density threshold such that some predefined
fraction of the lightray's column density is contained by this threshold, we
will use the default of 80% for this explanation.
*fix all this later*

.._spectacle-method:

Spectacle
----------

This method utilizes trident's feature of creating synthetic spectra from a
light ray object as well as spectacle's ability to fit lines to these spectra.
For more details about how Spectacle works and specifically how it runs fits see
`Spectacle: Line Finding
<https://spectacle-py.readthedocs.io/en/latest/line_finding.html>`
and `Spectacle: Fitting
<https://spectacle-py.readthedocs.io/en/latest/fitting.html>`
